import{_ as q}from"./Popover-5414f173.js";import{j as K,u as w,E as M,r as A,o as s,c as P,w as u,h as n,f as r,K as i,aT as Q,y as j,d as o,F as N,g as O,t as d,ad as b,aR as R,aQ as U,a5 as G,e as k,aS as H,ae as C,aC as J,i as F,aP as W}from"./frappe-ui-d69b39da.js";const X={class:"w-full"},Y={key:0,class:"flex w-[calc(100%-1rem)] space-x-1.5 p-0.5 text-gray-800"},Z={class:"text-ellipsis whitespace-nowrap"},ee={key:1,class:"text-base text-gray-600"},te={class:"rounded rounded-t-none bg-white px-1.5 shadow"},le={class:"sticky top-0 mb-1.5 flex items-stretch space-x-1.5 bg-white pt-1.5"},ae={class:"relative -m-1 flex flex-1 overflow-hidden p-1"},se={key:0,class:"absolute right-2 flex h-full items-center"},ne={key:0,class:"flex h-7 w-full items-center rounded bg-gray-50 px-3 text-sm font-light"},re={class:"flex items-baseline space-x-2"},ue={key:0,class:"text-sm font-light text-gray-600"},oe={class:"sticky bottom-0 flex justify-end space-x-2 bg-white py-2"},de={__name:"ListPicker",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:Array,modelValue:Array,options:{type:Array,default:[]},loading:{type:Boolean,default:!1}},emits:["inputChange","change","update:modelValue","apply"],setup(m,{emit:I}){const g=I,y=m,v=K(""),V=w(()=>S(y.options.slice()));function S(e){return!e||e.length===0?[]:(e[0].hasOwnProperty("label")&&e[0].hasOwnProperty("value"),typeof e[0]=="string"&&(e=e.map(t=>({label:t,value:t}))),e=e.filter((t,p,c)=>t&&t.value&&c.findIndex(x=>x.value===t.value)===p),e)}const z=y.modelValue?"modelValue":"value",a=w({get(){var e;return S((e=y[z])==null?void 0:e.slice())},set(e){g("change",e),g("update:modelValue",e)}});function $(e){return a.value.findIndex(t=>t.value===e.value)>-1}function D(e){$(e)?a.value=a.value.filter(t=>t.value!==e.value):a.value=[...a.value,e]}const E=M("$utils"),f=w(()=>v.value?E.fuzzySearch(V.value,{term:v.value,keys:["label","value"]}):V.value),L=()=>{a.value=a.value.length>0?[]:f.value};return(e,t)=>{const p=A("FeatherIcon"),c=A("Button"),x=q;return s(),P(i(W),{multiple:"",nullable:"",modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=h=>a.value=h)},{default:u(({open:h})=>[n(x,{class:"w-full"},{target:u(({open:_})=>[r("div",X,[n(i(Q),{class:j(["form-input flex h-fit w-full items-center justify-between rounded border-gray-400 bg-gray-100",{"rounded-b-none":h,"p-1":a.value.length>0,"px-3 py-1.5":a.value.length===0}]),onClick:l=>_()},{default:u(()=>[a.value.length>0?(s(),o("span",Y,[(s(!0),o(N,null,O(a.value,l=>(s(),o("span",{class:"flex h-6 items-center rounded bg-white px-2 text-sm shadow",key:l.value||l},[r("span",Z,d(l.label||l.value||l),1)]))),128))])):(s(),o("span",ee,d(m.placeholder||""),1)),n(p,{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})]),_:2},1032,["class","onClick"])])]),body:u(({close:_})=>[b(r("div",te,[n(i(R),{static:"",class:"max-h-[20rem] overflow-y-auto"},{default:u(()=>[r("div",le,[r("div",ae,[n(i(U),{class:"form-input block w-full border-gray-400 placeholder-gray-500",ref:"input",type:"text",onChange:t[0]||(t[0]=l=>{v.value=l.target.value,g("inputChange",l.target.value)}),value:v.value,autocomplete:"off",placeholder:"Search..."},null,8,["value"]),m.loading?(s(),o("div",se,[n(i(G),{class:"h-3 w-3"})])):k("",!0)]),n(c,{icon:"x",onClick:t[1]||(t[1]=l=>a.value=[])})]),f.value.length===0?(s(),o("div",ne," No results found ")):k("",!0),(s(!0),o(N,null,O(f.value,(l,T)=>b((s(),P(i(H),{key:T,value:l,onClick:()=>{e.$refs.input.el.focus(),D(l)}},{default:u(({active:B})=>[r("div",{class:j(["flex h-7 w-full cursor-pointer items-center justify-between rounded px-3 text-base",{"bg-gray-100 text-gray-800":B,"bg-white":!B}])},[r("div",re,[r("span",null,d(l.label),1),l.description?(s(),o("span",ue,d(l.description),1)):k("",!0)]),b(n(p,{name:"check",class:"h-4 w-4"},null,512),[[C,$(l)]])],2)]),_:2},1032,["value","onClick"])),[[C,f.value.length>0]])),128)),r("div",oe,[n(c,{variant:"secondary",onClick:t[2]||(t[2]=J(l=>L(),["prevent","stop"]))},{default:u(()=>[F(d(a.value.length>0?"Clear":"Select All"),1)]),_:1}),n(c,{variant:"solid",onClick:l=>e.$emit("apply",a.value)||_()},{default:u(()=>t[4]||(t[4]=[F(" Apply ")])),_:2},1032,["onClick"])])]),_:2},1024)],512),[[C,h]])]),_:2},1024)]),_:1},8,["modelValue"])}}};export{de as _};
//# sourceMappingURL=ListPicker-9a2927d2.js.map
