import{o as y,d as b,f as l,t as p,z as v,j as g,T as q,u as h,h as s,w as i,K as f,F as w,r as _}from"./frappe-ui-d69b39da.js";import{D as V}from"./DatePicker-296330db.js";import{P as k}from"./PageBreadcrumbs-2c73064a.js";import{s as S}from"./router-9009eafe.js";import{C as T}from"./check-2c63c113.js";import"./Popover-5414f173.js";import"./house-94cdb6cd.js";import"./index-77f7bd6f.js";import"./chevron-right-abc82e4c.js";import"./ellipsis-10a30b7b.js";import"./toasts-2937f9d2.js";const C={class:"flex"},E={class:"flex-1"},B={class:"font-medium leading-6 text-gray-900"},$={class:"text-gray-600"},D={class:"flex flex-1 items-center pl-20"},r={__name:"Setting",props:{label:{type:String,required:!0},description:{type:String,required:!0}},setup(c){return(d,t)=>(y(),b("div",C,[l("div",E,[l("p",B,p(c.label),1),l("span",$,p(c.description),1)]),l("div",D,[v(d.$slots,"default")])]))}},U={class:"sticky top-0 z-10 flex items-center justify-between bg-white px-5 py-2.5"},j={class:"space-x-2.5"},A={class:"flex flex-1 space-y-4 overflow-hidden bg-white px-6 py-2"},F={class:"-m-1 flex flex-1 flex-col space-y-6 overflow-y-auto p-1"},N={class:"rounded bg-white p-6 shadow"},Q={class:"mt-4 flex flex-col space-y-8"},R={class:"rounded bg-white p-6 shadow"},I={class:"mt-4 flex flex-col space-y-8"},X={__name:"Settings",setup(c){const d={query_result_limit:1e3,query_result_expiry:60,auto_execute_query:!0,allow_subquery:!0,fiscal_year_start:null,telegram_api_token:""},t=g(d),u=S();q(()=>{u.settings?Object.keys(t.value).forEach(o=>{t.value[o]=u.settings[o]}):t.value=d});const x=h(()=>{const o=t.value,e=u.settings;return!o||!e?!0:Object.keys(o).find(m=>o[m]!==e[m])===void 0||u.settings.loading});return document.title="Settings - Insights",(o,e)=>{const m=_("Button"),n=_("Input");return y(),b(w,null,[l("header",U,[s(k,{class:"h-7",items:[{label:"Settings"}]}),l("div",j,[s(m,{label:"Update",disabled:x.value,variant:"solid",onClick:e[0]||(e[0]=a=>f(u).update(t.value))},{prefix:i(()=>[s(f(T),{class:"w-4"})]),_:1},8,["disabled"])])]),l("div",A,[l("div",F,[l("div",N,[e[9]||(e[9]=l("div",{class:"flex items-baseline"},[l("div",{class:"text-xl font-medium text-gray-700"},"General")],-1)),l("div",Q,[s(r,{label:"Max Query Result Limit",description:"Maximum number of rows to be returned by a query. This is to prevent long running queries and memory issues."},{default:i(()=>[s(n,{type:"number",min:"0",modelValue:t.value.query_result_limit,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.query_result_limit=a)},null,8,["modelValue"]),e[7]||(e[7]=l("div",{class:"ml-2 text-gray-600"},"Rows",-1))]),_:1}),s(r,{label:"Cache Query Results For",description:"Number of minutes to cache query results. This is to prevent accidental running of the same query multiple times."},{default:i(()=>[s(n,{type:"number",min:"0",modelValue:t.value.query_result_expiry,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.query_result_expiry=a)},null,8,["modelValue"]),e[8]||(e[8]=l("div",{class:"ml-2 text-gray-600"},"Minutes",-1))]),_:1}),s(r,{label:"Fiscal Year Start",description:"Start of the fiscal year. This is used to calculate fiscal year for date columns."},{default:i(()=>[s(V,{placeholder:"Select Date",value:t.value.fiscal_year_start,onChange:e[3]||(e[3]=a=>t.value.fiscal_year_start=a)},null,8,["value"])]),_:1}),s(r,{label:"Auto Execute Query",description:"Automatically execute when tables, columns, or filters are changed."},{default:i(()=>[s(n,{type:"checkbox",modelValue:t.value.auto_execute_query,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.auto_execute_query=a),label:t.value.auto_execute_query?"Enabled":"Disabled"},null,8,["modelValue","label"])]),_:1}),s(r,{label:"Enable Query Reusability",description:"Allow selecting query as a table in another query. Any query selected as a table will be appended as a sub query using CTE (Common Table Expression)."},{default:i(()=>[s(n,{type:"checkbox",modelValue:t.value.allow_subquery,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.allow_subquery=a),label:t.value.allow_subquery?"Enabled":"Disabled"},null,8,["modelValue","label"])]),_:1})])]),l("div",R,[e[10]||(e[10]=l("div",{class:"flex items-baseline"},[l("div",{class:"text-xl font-medium text-gray-700"},"Notifications")],-1)),l("div",I,[s(r,{label:"Telegram Bot Token",description:"Telegram bot token to send notifications to Telegram."},{default:i(()=>[s(n,{type:"password",modelValue:t.value.telegram_api_token,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.telegram_api_token=a),placeholder:"Telegram Bot Token"},null,8,["modelValue"])]),_:1})])])])])],64)}}};export{X as default};
//# sourceMappingURL=Settings-b4d98a9c.js.map
