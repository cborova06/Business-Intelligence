import{_ as U}from"./Checkbox-95c21eb1.js";import{u as v,r as T,o as s,d as C,h as r,c as p,e as i,K as w,f as x,w as k,F as E}from"./frappe-ui-d69b39da.js";import{_ as N}from"./Autocomplete-e91e4d1c.js";import{_ as F}from"./DraggableList-f8776dbd.js";import{D}from"./DraggableListItemMenu-330d2ccb.js";import{F as c}from"./index-9194c21d.js";import{d as B}from"./format-a2b0a407.js";import"./Popover-5414f173.js";import"./index-77f7bd6f.js";import"./vuedraggable.umd-f13fb48a.js";import"./grip-vertical-c5c2fa7d.js";import"./x-3f18ad86.js";import"./toasts-2937f9d2.js";import"./calendar-1687c485.js";import"./clock-73e01da8.js";import"./dayjs-e81f6541.js";const S={class:"flex flex-col gap-3"},L={__name:"TableColumnOptions",props:{modelValue:{type:Object,required:!0},column:{type:Object,required:!0}},emits:["update:modelValue"],setup(V,{emit:y}){var f,u;const n=V;n.modelValue.column_type||(n.modelValue.column_type=c.NUMBER.includes((f=n.column)==null?void 0:f.type)?"Number":c.DATE.includes((u=n.column)==null?void 0:u.type)?"Date":"Text");const d=y,e=v({get:()=>n.modelValue,set:o=>d("update:modelValue",o)}),b=v(()=>{var o,t,a,m;return(o=n.column)!=null&&o.type?c.NUMBER.includes((t=n.column)==null?void 0:t.type)?["Number","Text","Link"]:c.TEXT.includes((a=n.column)==null?void 0:a.type)?["Text","Link"]:c.DATE.includes((m=n.column)==null?void 0:m.type)?["Text","Date"]:[]:[]});return(o,t)=>{const a=T("FormControl"),m=U;return s(),C("div",S,[r(a,{label:"Column Type",type:"select",options:b.value,modelValue:e.value.column_type,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.column_type=l)},null,8,["options","modelValue"]),e.value.column_type==="Link"?(s(),p(a,{key:0,type:"text",label:"Link URL",autocomplete:"off",placeholder:"eg. https://github.com/{{ value }}",description:"Use {{ value }} to substitute the value of the column",modelValue:e.value.link_url,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.link_url=l)},null,8,["modelValue"])):i("",!0),e.value.column_type==="Number"?(s(),p(a,{key:1,type:"text",label:"Prefix",autocomplete:"off",modelValue:e.value.prefix,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.prefix=l),placeholder:"Enter a prefix..."},null,8,["modelValue"])):i("",!0),e.value.column_type==="Number"?(s(),p(a,{key:2,type:"text",label:"Suffix",autocomplete:"off",modelValue:e.value.suffix,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.suffix=l),placeholder:"Enter a suffix..."},null,8,["modelValue"])):i("",!0),e.value.column_type==="Number"?(s(),p(a,{key:3,type:"number",label:"Decimals",autocomplete:"off",modelValue:e.value.decimals,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.decimals=l),placeholder:"Enter a number..."},null,8,["modelValue"])):i("",!0),e.value.column_type==="Number"?(s(),p(a,{key:4,type:"select",label:"Total Type",placeholder:"Select a total type...",options:["Sum","Average"],modelValue:e.value.total_type,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.total_type=l)},null,8,["modelValue"])):i("",!0),e.value.column_type==="Number"?(s(),p(m,{key:5,modelValue:e.value.show_inline_bar_chart,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.show_inline_bar_chart=l),label:"Show Inline Bar Chart"},null,8,["modelValue"])):i("",!0),e.value.column_type==="Date"?(s(),p(a,{key:6,type:"select",label:"Date Format",autocomplete:"off",modelValue:e.value.date_format,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.date_format=l),placeholder:"Select a date format...",options:w(B)},null,8,["modelValue","options"])):i("",!0)])}}},O={class:"mb-1 flex items-center justify-between"},Q={__name:"TableOptions",props:{modelValue:{type:Object,required:!0},columns:{type:Array,required:!0}},emits:["update:modelValue"],setup(V,{emit:y}){const n=y,d=V,e=v({get:()=>d.modelValue,set:u=>n("update:modelValue",u)});e.value.columns||(e.value.columns=[]),Array.isArray(e.value.columns)&&typeof e.value.columns[0]=="string"&&(e.value.columns=e.value.columns.map(u=>({column:u,column_options:{}}))),e.value.columns.forEach(u=>{u.column||(u.column=u.label||u.value),u.column_options||(u.column_options={})});const b=v(()=>{var u;return(u=d.columns)==null?void 0:u.map(o=>({label:o.label,value:o.label,description:o.type}))});function f(u){e.value.columns=u.map(o=>{const t=e.value.columns.find(m=>m.label===o.value),a=t?t.column_options:{};return{column:o.value,column_options:a}})}return(u,o)=>{const t=T("Button"),a=T("FormControl"),m=U;return s(),C(E,null,[x("div",null,[x("div",O,[o[5]||(o[5]=x("label",{class:"block text-xs text-gray-600"},"Columns",-1)),r(N,{multiple:!0,options:b.value,modelValue:e.value.columns,"onUpdate:modelValue":f},{target:k(({togglePopover:l})=>[r(t,{variant:"ghost",icon:"plus",onClick:l},null,8,["onClick"])]),_:1},8,["options","modelValue"])]),r(F,{group:"columns","item-key":"column","empty-text":"No columns selected",items:e.value.columns,"onUpdate:items":o[0]||(o[0]=l=>e.value.columns=l)},{"item-suffix":k(({item:l,index:g})=>[r(D,null,{default:k(()=>[l.column_options&&d.columns?(s(),p(L,{key:0,"model-value":l.column_options,column:d.columns.find(_=>_.label===l.column),"onUpdate:modelValue":_=>e.value.columns[g].column_options=_},null,8,["model-value","column","onUpdate:modelValue"])):i("",!0)]),_:2},1024)]),_:1},8,["items"])]),r(a,{type:"text",label:"Title",class:"w-full",modelValue:e.value.title,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.title=l),placeholder:"Title"},null,8,["modelValue"]),r(m,{modelValue:e.value.index,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.index=l),label:"Show Index Row"},null,8,["modelValue"]),r(m,{modelValue:e.value.showTotal,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.showTotal=l),label:"Show Total Row"},null,8,["modelValue"]),r(m,{modelValue:e.value.filtersEnabled,"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.filtersEnabled=l),label:"Show Filter Row"},null,8,["modelValue"])],64)}}};export{Q as default};
//# sourceMappingURL=TableOptions-71fa3332.js.map
