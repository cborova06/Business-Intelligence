import{_ as le}from"./Popover-5414f173.js";import{x as T,L as U,M as j,j as b,ak as re,u as F,r as A,o as g,d as D,f as _,h as w,w as C,i as oe,t as S,c as N,e as P,F as B,g as $,y as E,K as W}from"./frappe-ui-d69b39da.js";import{C as ue}from"./calendar-1687c485.js";const se={class:"flex w-[210px] select-none flex-col gap-2 bg-white text-base"},ie={class:"flex items-center justify-between text-gray-700"},ce={class:"flex gap-2"},fe={class:"tnum flex flex-col items-center justify-center text-base"},ve={class:"grid w-full grid-cols-7"},de=["onClick"],me={key:0,class:"mt-1 text-xs leading-4 text-gray-600"},ge=T({__name:"DatePicker",props:U({range:{type:Boolean,default:!0}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const k=h,i=j(h,"modelValue"),y=new Date,f=b(y.getFullYear()),c=b(y.getMonth()+1),n=b(i.value[0]||""),a=b(i.value[1]||"");re(()=>{o()});function o(){const e=a.value?new Date(a.value):n.value?new Date(n.value):y;f.value=e.getFullYear(),c.value=e.getMonth()+1}const p=F(()=>{const e=[],t=d.value.slice();for(;t.length;){const l=t.splice(0,7);e.push(l)}return e}),d=F(()=>{if(!(f.value&&c.value))return[];const e=c.value-1,t=f.value,l=v(t,e,1),s=v(t,e+1,0),r=l.getDay(),x=6-s.getDay(),m=Y(l,-r),ee=Y(s,x),te=q(e,t),ne=Y(l,te-1);let M=[...m,l,...ne,...ee];if(M.length<42){const L=M.at(-1);if(L){const ae=Y(L,42-M.length);M=M.concat(...ae)}}return M});function Y(e,t){let l=1;t<0&&(l=-1,t=Math.abs(t));let s=[];for(;t;)e=v(e.getFullYear(),e.getMonth(),e.getDate()+l),s.push(e),t--;return l===-1?s.reverse():s}function q(e,t){let s=[31,28,31,30,31,30,31,31,30,31,30,31][e];return e===1&&z(t)?29:s}function z(e){return e%400===0?!0:e%100===0?!1:e%4===0}function G(){return v(f.value,c.value-1,1).toLocaleString("en-US",{month:"short",year:"numeric"})}function H(e,t={}){return e.toLocaleDateString("en-US",{day:"numeric",month:"short",year:t.year?"numeric":void 0})}function K(e){if(!k.range){n.value=u(e),V();return}n.value&&a.value?(n.value=u(e),a.value=""):n.value&&!a.value?a.value=u(e):n.value=u(e),R(),V()}function R(){if(!n.value||!a.value)return;let e=v(n.value),t=v(a.value);if(e>t){let l=e;e=t,t=l}n.value=u(e),a.value=u(t)}function V(){if(!k.range){i.value=[n.value];return}if(!n.value&&!a.value){i.value=[];return}i.value=[n.value,a.value]}function J(){I(-1)}function O(){I(1)}function I(e){c.value=c.value+e,c.value<1&&(c.value=12,f.value=f.value-1),c.value>12&&(c.value=1,f.value=f.value+1)}function Q(e){return!n.value||!a.value?!1:e>=v(n.value)&&e<=v(a.value)}function X(){n.value="",a.value="",o(),V()}function u(e){return e?typeof e=="string"?e:(e.setHours(0,-e.getTimezoneOffset(),0,0),e.toISOString().slice(0,10)):""}function v(...e){return new Date(...e)}const Z=F(()=>{const e=n.value?v(n.value):null,t=a.value?v(a.value):null,l=e==null?void 0:e.getFullYear(),s=t==null?void 0:t.getFullYear(),r=x=>H(x,{year:l!==s});return e&&t&&e.getTime()===t.getTime()?`Equals: ${r(e)}`:e&&t?`Between: ${r(e)} and ${r(t)}`:e?`Greater than: ${r(e)}`:t?`Less than: ${r(t)}`:""});return(e,t)=>{const l=A("Button"),s=A("FormControl");return g(),D("div",se,[_("div",ie,[w(l,{onClick:J,icon:"chevron-left"}),w(l,{onDblclick:X},{default:C(()=>[oe(S(G()),1)]),_:1}),w(l,{onClick:O,icon:"chevron-right"})]),_("div",ce,[w(s,{class:"flex-1",placeholder:"Enter date",modelValue:n.value,"onUpdate:modelValue":[t[0]||(t[0]=r=>n.value=r),t[1]||(t[1]=r=>(V(),o()))],autocomplete:"off"},null,8,["modelValue"]),h.range?(g(),N(s,{key:0,class:"flex-1",placeholder:"Enter date",modelValue:a.value,"onUpdate:modelValue":[t[2]||(t[2]=r=>a.value=r),t[3]||(t[3]=r=>(V(),o()))],autocomplete:"off"},null,8,["modelValue"])):P("",!0)]),_("div",fe,[_("div",ve,[(g(),D(B,null,$(["S","M","T","W","T","F","S"],(r,x)=>_("div",{key:x,class:"flex h-[30px] w-[30px] items-center justify-center text-sm text-gray-600"},S(r),1)),64)),(g(!0),D(B,null,$(p.value,(r,x)=>(g(),D(B,{key:x},[(g(!0),D(B,null,$(r,m=>(g(),D("div",{key:u(m),class:E(["flex h-[30px] w-[30px] cursor-pointer items-center justify-center text-sm",{"font-bold":u(m)===u(W(y))," rounded-l bg-gray-400 !font-medium":n.value&&u(m)===u(n.value)," rounded-r bg-gray-400 !font-medium":a.value&&u(m)===u(a.value),"bg-gray-100 font-medium text-gray-800":Q(m)}]),onClick:()=>K(m)},S(m.getDate()),11,de))),128))],64))),128))]),h.range?(g(),D("p",me,S(Z.value),1)):P("",!0)])])}}}),pe={class:"flex p-2"},De=T({__name:"DatePickerControl",props:U({placeholder:{type:String,default:"Select Date"},range:{type:Boolean,default:!1}},{modelValue:{default:()=>[],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const k=h,i=j(h,"modelValue"),y=n=>{const a=[];typeof n=="string"?a.push(new Date(n)):Array.isArray(n)&&n.every(d=>typeof d=="string")?(a.push(new Date(n[0])),a.push(new Date(n[1]))):n instanceof Date?a.push(n):Array.isArray(n)&&n.every(d=>d instanceof Date)&&(a.push(n[0]),a.push(n[1]));const[o,p]=a;return o&&!p?o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:o.getFullYear()===new Date().getFullYear()?void 0:"numeric"}):o&&p?`${o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:o.getFullYear()===new Date().getFullYear()?void 0:"numeric"})} - ${p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:p.getFullYear()===new Date().getFullYear()?void 0:"numeric"})}`:""},f=F(()=>i.value.length&&i.value.every(n=>n)),c=F(()=>f.value?k.range?y(i.value):y(i.value[0]):k.placeholder);return(n,a)=>{const o=A("Button"),p=le;return g(),N(p,{placement:"bottom-start"},{target:C(({togglePopover:d})=>[w(o,{class:"w-full items-center !justify-start overflow-hidden",onClick:d},{prefix:C(()=>[w(W(ue),{class:"h-4 w-4 flex-shrink-0 text-gray-600","stroke-width":"1.5"})]),default:C(()=>[_("span",{class:E(["truncate",f.value?"text-gray-900":"text-gray-600"])},S(c.value),3)]),_:2},1032,["onClick"])]),"body-main":C(()=>[_("div",pe,[w(ge,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=d=>i.value=d),range:k.range},null,8,["modelValue","range"])])]),_:1})}}});export{ge as _,De as a};
//# sourceMappingURL=DatePickerControl.vue_vue_type_script_setup_true_lang-6baff6f5.js.map
