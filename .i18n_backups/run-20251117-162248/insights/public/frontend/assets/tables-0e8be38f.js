import{s as g,j as u,v as s}from"./frappe-ui-d69b39da.js";import{b as f,f as l,ad as p}from"./main-d2d228fc.js";const i=u({}),r=u(!1);async function b(a,e,t=100){r.value=!0;const n=await s("insights.api.data_sources.get_data_source_tables",{data_source:a,search_term:e,limit:t});return r.value=!1,a?i.value[a]=n:i.value.__all=n,n}const o=u(!1);async function _(a,e){return o.value=!0,s("insights.api.data_sources.get_data_source_table",{data_source:a,table_name:e}).catch(t=>{f(t)}).finally(()=>{o.value=!1})}async function d(a,e){return s("insights.api.data_sources.get_data_source_table_columns",{data_source:a,table_name:e}).then(t=>t.map(n=>({name:n.column,type:n.type})))}async function h(a,e){return s("insights.api.data_sources.get_data_source_table_row_count",{data_source:a,table_name:e})}const c=u(!1);async function v(a){return c.value=!0,l({message:`Updating tables for ${a}`,variant:"info"}),s("insights.api.data_sources.update_data_source_tables",{data_source:a}).then(()=>{b(a),l({message:`Tables updated for ${a}`,variant:"success"})}).catch(e=>{f(e)}).finally(()=>{c.value=!1})}async function m(a,e,t){return s("insights.api.data_sources.get_table_links",{data_source:a,left_table:e,right_table:t})}async function T(a){return l({title:"Updating table links",message:`Updating table links for ${a}. This may take a while.`,variant:"info"}),s("insights.api.data_sources.update_table_links",{data_source:a}).then(()=>{l({message:`Table links updated for ${a}`,variant:"success"})})}function y(a){return i.value[a]?p(i.value[a],{label:"table_name",value:"table_name",description:"data_source"}):[]}function $(){return g({tables:i,loading:r,getTables:b,getRowCount:h,getOptions:y,getTableColumns:d,updatingDataSourceTables:c,updateDataSourceTables:v,getTableLinks:m,updateTableLinks:T,fetchingTable:o,fetchTable:_})}export{b as a,h as b,y as g,$ as u};
//# sourceMappingURL=tables-0e8be38f.js.map
