import{x as C,j as i,B as D,T as B,d as F,f as r,h as o,K as t,w as u,k as h,m as $,F as L,r as m,o as N,aF as R,aJ as V}from"./frappe-ui-d69b39da.js";import{u as _}from"./data_source-00c6028c.js";import{u as E}from"./tables-0e8be38f.js";import{S as U}from"./search-34ad51bc.js";import{E as j}from"./ellipsis-10a30b7b.js";import{R as w}from"./refresh-ccw-f825866d.js";import"./main-d2d228fc.js";import"./index-77f7bd6f.js";import"./text-cursor-input-3636b908.js";import"./combine-0dbf7ac7.js";import"./chevron-down-7c5e9308.js";const K={class:"flex h-12 items-center justify-between border-b py-2.5 pl-5 pr-2"},J={class:"mb-4 flex h-full flex-col gap-3 overflow-auto px-5 py-3"},O={class:"flex gap-2 overflow-visible py-1"},Y=C({__name:"DataSourceTableList",props:{name:{}},setup(S){const e=S,p=_().getSource(e.name),s=E(),l=i(""),d=i();D(l,()=>c(),{debounce:300,immediate:!0});function c(){s.getTables(e.name,l.value).then(a=>{d.value=a})}const T=i({columns:[{label:"Table Name",key:"table_name"}],rows:d,rowKey:"table_name",options:{showTooltip:!1,getRowRoute:a=>({path:`/data-source/${e.name}/${a.table_name}`}),emptyState:{title:"No Tables Found",description:"No tables found for the selected data source.",button:{label:"Refresh",iconLeft:"refresh-ccw",variant:"outline",loading:s.updatingDataSourceTables,onClick:()=>s.updateDataSourceTables(e.name).then(()=>c())}}}}),g=_();return B(()=>{const a=g.getSource(e.name);document.title=`Tables | ${e.name||(a==null?void 0:a.title)}`}),(a,n)=>{var f,b;const x=m("FormControl"),v=m("Button"),y=m("Dropdown");return N(),F(L,null,[r("header",K,[o(t(R),{items:[{label:"Data Sources",route:"/data-source"},{label:((f=t(p))==null?void 0:f.title)||e.name,route:`/data-source/${e.name}`}]},null,8,["items"]),n[1]||(n[1]=r("div",{class:"flex items-center gap-2"},null,-1))]),r("div",J,[r("div",O,[o(x,{placeholder:"Search by Title",modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=k=>l.value=k),debounce:300},{prefix:u(()=>[o(t(U),{class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue"]),o(y,{options:[{label:"Update Tables",onClick:()=>t(s).updateDataSourceTables(e.name).then(()=>c()),icon:()=>h(t(w),{class:"h-4 w-4 text-gray-700","stroke-width":"1.5"})},(b=t(p))!=null&&b.is_frappe_db?{label:"Update Table Links",onClick:()=>t(s).updateTableLinks(e.name),icon:()=>h(t(w),{class:"h-4 w-4 text-gray-700","stroke-width":"1.5"})}:null]},{default:u(()=>[o(v,null,{icon:u(()=>[o(t(j),{class:"h-4 w-4 text-gray-700","stroke-width":"1.5"})]),_:1})]),_:1},8,["options"])]),o(t(V),$({class:"h-full"},T.value),null,16)])],64)}}});export{Y as default};
//# sourceMappingURL=DataSourceTableList-42603812.js.map
