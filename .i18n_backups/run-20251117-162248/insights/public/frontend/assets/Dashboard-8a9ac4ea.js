import{x as y,aG as l,I as B,j as p,H as D,d as $,f as i,h as a,K as t,w as c,c as V,e as N,F as R,r as d,v as F,an as I,o as u,aF as W}from"./frappe-ui-d69b39da.js";import{d as j,w as E}from"./main-d2d228fc.js";import{u as G}from"./dashboard-37329027.js";import{_ as O,a as A}from"./VueGridLayout.vue_vue_type_style_index_0_lang-dd27665c.js";import{R as H}from"./refresh-ccw-f825866d.js";import"./index-77f7bd6f.js";import"./text-cursor-input-3636b908.js";import"./combine-0dbf7ac7.js";import"./chevron-down-7c5e9308.js";import"./ChartRenderer.vue_vue_type_script_setup_true_lang-564d1b03.js";import"./ChartSectionEmptySvg-d77827da.js";import"./DrillDown.vue_vue_type_script_setup_true_lang-3700404a.js";import"./ExpressionEditor.vue_vue_type_style_index_0_lang-9e2463ac.js";import"./vue-codemirror.esm-d1d2df5a.js";import"./play-63d306bd.js";import"./ellipsis-10a30b7b.js";import"./Popover-5414f173.js";import"./Autocomplete-e91e4d1c.js";import"./index-9194c21d.js";import"./toasts-2937f9d2.js";import"./calendar-1687c485.js";import"./clock-73e01da8.js";import"./vuedraggable.umd-f13fb48a.js";import"./grip-vertical-c5c2fa7d.js";import"./x-3f18ad86.js";import"./search-34ad51bc.js";import"./DatePickerControl.vue_vue_type_script_setup_true_lang-6baff6f5.js";import"./plus-3394075c.js";import"./tables-0e8be38f.js";import"./data_source-00c6028c.js";import"./table-2-565c43f4.js";import"./check-2c63c113.js";import"./chevron-left-c299c44c.js";import"./DataTable.vue_vue_type_script_setup_true_lang-0fc4cbd5.js";import"./ContentEditable-bc84e80c.js";import"./chevron-right-abc82e4c.js";import"./IndicatorIcon-21535c9e.js";import"./refresh-cw-ef6c08ee.js";import"./maximize-3d779b9b.js";import"./ColumnFilterValueSelector.vue_vue_type_script_setup_true_lang-88f0bec7.js";const K={class:"flex h-12 items-center justify-between border-b py-2.5 pl-5 pr-2"},P={class:"flex items-center gap-2"},S={class:"relative flex h-full w-full overflow-hidden"},Fo=y({__name:"Dashboard",props:{name:{}},async setup(f){let e,r;const _=f,h=([e,r]=l(()=>F("insights.api.shared.get_dashboard_name",{dashboard_name:_.name})),e=await e,r(),e),o=G(h);I("dashboard",o),o.refresh();const b=B();function w(){b.push(`/workbook/${o.doc.workbook}`)}[e,r]=l(()=>E(()=>o.isloaded)),await e,r();const k=p(o.doc.has_workbook_access),n=p(null);async function v(){n.value&&await j(n.value,`${o.doc.title}.png`)}const C=D("dashboard_vertical_compact",!0);return(U,m)=>{const x=d("Button"),g=d("Dropdown");return u(),$(R,null,[i("header",K,[a(t(W),{items:[{label:"Dashboards",route:"/dashboards"},{label:t(o).doc.title,route:`/dashboards/${t(o).doc.name}`}]},null,8,["items"]),i("div",P,[a(x,{variant:"outline",onClick:m[0]||(m[0]=()=>t(o).refresh(!0)),label:"Refresh"},{prefix:c(()=>[a(t(H),{class:"h-4 w-4 text-gray-700","stroke-width":"1.5"})]),_:1}),a(g,{placement:"left",button:{icon:"more-vertical",variant:"outline"},options:[{label:"Export as PNG",variant:"outline",icon:"download",onClick:v},k.value?{label:"Open Workbook",variant:"outline",icon:"external-link",onClick:w}:null]},null,8,["options"])])]),i("div",S,[i("div",{ref_key:"dashboardContainer",ref:n,class:"flex-1 overflow-y-auto p-4"},[t(o).doc.items.length>0?(u(),V(O,{key:0,class:"h-fit w-full",cols:20,disabled:!0,verticalCompact:t(C),modelValue:t(o).doc.items.map(s=>s.layout)},{item:c(({index:s})=>[a(A,{index:s,item:t(o).doc.items[s]},null,8,["index","item"])]),_:1},8,["verticalCompact","modelValue"])):N("",!0)],512)])],64)}}});export{Fo as default};
//# sourceMappingURL=Dashboard-8a9ac4ea.js.map
