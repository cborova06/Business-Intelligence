import{_ as b,o as _,d as y,f as s,t as B,z as C,h as i,j as c,S as q,I as H,af as L,c as k,w,r as v,K as r,as as V,i as R,aC as S}from"./frappe-ui-d69b39da.js";import{_ as j}from"./insights-logo-new-611f92f4.js";import{s as E}from"./toasts-2937f9d2.js";import"./index-77f7bd6f.js";const $={},z={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 102 30"};function F(m,t){return _(),y("svg",z,t[0]||(t[0]=[s("path",{fill:"currentColor",d:"M17.33 5.666h4.764v3.085h.187c.643-2.188 2.275-3.34 4.253-3.34.498 0 1.106.069 1.549.172v4.348c-.463-.152-1.397-.262-2.075-.262-2.171 0-3.762 1.497-3.762 3.671v10H17.33V5.666ZM28.636 18.413c0-3.948 3.146-5.121 6.652-5.445 3.078-.297 4.288-.449 4.288-1.588v-.069c0-1.449-.955-2.291-2.628-2.291-1.763 0-2.815.863-3.146 2.036l-4.544-.366c.678-3.223 3.472-5.252 7.718-5.252 3.941 0 7.517 1.774 7.517 5.984v11.925h-4.661v-2.45h-.139c-.864 1.65-2.558 2.788-5.18 2.788-3.374-.007-5.877-1.773-5.877-5.272Zm10.974-1.387v-1.878c-.587.394-2.344.642-3.416.794-1.729.242-2.87.918-2.87 2.305 0 1.346 1.086 2.05 2.594 2.05 2.164 0 3.692-1.415 3.692-3.271ZM47.093 5.694h4.84V8.66h.222c.657-1.435 2.075-3.202 5.041-3.202 3.887 0 7.171 3.016 7.171 9.096 0 5.914-3.146 9.103-7.185 9.103-2.863 0-4.35-1.65-5.027-3.12h-.152V30h-4.91V5.694Zm8.533 14.065c2.414 0 3.728-2.14 3.728-5.225 0-3.064-1.293-5.169-3.727-5.169-2.386 0-3.728 2.015-3.728 5.17 0 3.153 1.362 5.224 3.727 5.224ZM66.151 5.694H71V8.66h.221c.657-1.435 2.075-3.202 5.041-3.202 3.887 0 7.171 3.016 7.171 9.096 0 5.914-3.146 9.103-7.185 9.103-2.863 0-4.35-1.65-5.027-3.12h-.152V30H66.15V5.694Zm8.534 14.065c2.413 0 3.727-2.14 3.727-5.225 0-3.064-1.293-5.169-3.728-5.169-2.385 0-3.727 2.015-3.727 5.17 0 3.153 1.37 5.224 3.728 5.224ZM85.078 14.617c0-5.459 3.382-9.151 8.596-9.151 4.682 0 8.326 2.967 8.326 8.978v1.346H89.933v.014c0 2.636 1.556 4.258 4.01 4.258 1.64 0 2.905-.704 3.403-2.05l4.543.297c-.691 3.278-3.644 5.41-8.028 5.41-5.45 0-8.783-3.498-8.783-9.102Zm12.296-1.863c-.014-2.105-1.487-3.624-3.624-3.624-2.178 0-3.713 1.615-3.817 3.624h7.44ZM0 0v4.106h15.642V0H0ZM0 10.476v12.871h4.993V14.59h9.612v-4.113H0Z"},null,-1)]))}const N=b($,[["render",F]]),I={class:"h-full w-full pt-4 sm:pt-16"},U={class:"relative z-10"},A={class:"mx-auto bg-white px-4 py-8 sm:mt-6 sm:w-96 sm:rounded-lg sm:px-8 sm:shadow-xl"},D={class:"mb-6 text-center"},K={class:"text-base text-gray-900"},P={class:"fixed bottom-4 z-[1] flex w-full justify-center"},T={__name:"LoginBox",props:["title"],setup(m){const t=m;return(l,e)=>(_(),y("div",I,[s("div",U,[e[0]||(e[0]=s("div",{class:"flex"},[s("img",{src:j,class:"mx-auto h-12"})],-1)),s("div",A,[s("div",D,[s("span",K,B(t.title),1)]),C(l.$slots,"default")])]),s("div",P,[i(N,{class:"h-4"})])]))}},W={__name:"Login",setup(m){const t=E(),l=c(null),e=c(null),n=c(null),d=c(null),f=c(null),u=q(),h=H();L(()=>{var o;(o=u==null?void 0:u.query)!=null&&o.route&&(f.value=u.query.route,h.replace({query:null}))});const g=async()=>{if(!(!e.value||!n.value))try{d.value=null,l.value=!0,await t.login(e.value,n.value)&&h.push(f.value||"/")}catch(o){console.error(o),d.value=o.messages.join(`
`)}finally{l.value=!1}};return(o,a)=>{const x=v("FormControl"),M=v("ErrorMessage"),Z=v("Button");return _(),k(T,{class:"bg-gray-50",title:"Log in to your account"},{default:w(()=>[s("form",{class:"flex flex-col",onSubmit:S(g,["prevent"])},[i(x,{label:"Email",placeholder:"johndoe@mail.com",modelValue:r(e),"onUpdate:modelValue":a[0]||(a[0]=p=>V(e)?e.value=p:null),name:"email",autocomplete:"email",type:r(e)!=="Administrator"?"email":"text",required:""},null,8,["modelValue","type"]),i(x,{class:"mt-4",label:"Password",type:"password",placeholder:"•••••",modelValue:r(n),"onUpdate:modelValue":a[1]||(a[1]=p=>V(n)?n.value=p:null),name:"password",autocomplete:"current-password",required:""},null,8,["modelValue"]),i(M,{error:r(d),class:"!mt-2"},null,8,["error"]),i(Z,{class:"mt-4",variant:"solid",disabled:r(l),loading:r(l),onClick:g},{default:w(()=>a[2]||(a[2]=[R(" Log in with email ")])),_:1},8,["disabled","loading"])],32)]),_:1})}}};export{W as default};
//# sourceMappingURL=Login-2bd9aa59.js.map
