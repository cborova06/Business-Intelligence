import{r as c,o as l,c as w,w as b,f as e,t as v,y as T,aC as U,h as r,i as $,K as x,j as _,u as y,d,e as k,F as S,g as q,S as z,I as A}from"./frappe-ui-d69b39da.js";import{P as E}from"./PageBreadcrumbs-2c73064a.js";import{u as I}from"./useDashboards-65106383.js";import{s as M}from"./router-9009eafe.js";import{g as R,a as G}from"./index-9194c21d.js";import{P as K}from"./plus-3394075c.js";import"./house-94cdb6cd.js";import"./index-77f7bd6f.js";import"./chevron-right-abc82e4c.js";import"./ellipsis-10a30b7b.js";import"./dayjs-e81f6541.js";import"./toasts-2937f9d2.js";import"./calendar-1687c485.js";import"./clock-73e01da8.js";const O={class:"flex h-full flex-1 flex-col space-y-3 overflow-hidden rounded bg-white p-4 shadow"},Y={class:"flex w-full items-center justify-between overflow-hidden"},H={class:"flex h-6 items-center overflow-hidden"},J={class:"flex-1 truncate text-xl font-medium text-gray-800"},Q={class:"flex w-full items-end justify-between"},W={class:"flex gap-2"},X={class:"flex h-6 items-center text-sm text-gray-600"},Z={class:"flex h-6 items-center text-sm text-gray-600"},ee={class:"flex h-6 items-center text-sm text-gray-600"},te={__name:"DashboardListCard",props:{dashboard:{type:Object,required:!0}},setup(t){const h=t,s=I();function m(){s.toggleLike(h.dashboard)}return(f,u)=>{const o=c("FeatherIcon"),g=c("router-link");return l(),w(g,{class:"flex w-full cursor-pointer",to:{name:"Dashboard",params:{name:t.dashboard.name}}},{default:b(()=>[e("div",O,[e("div",Y,[e("div",H,[e("div",J,v(t.dashboard.title),1),e("span",{class:T(["ml-1 flex h-5 w-5 flex-shrink-0 cursor-pointer items-center justify-center rounded hover:bg-gray-100",{"text-yellow-500":t.dashboard.is_favourite,"text-gray-600":!t.dashboard.is_favourite}]),onClick:u[0]||(u[0]=U(n=>m(),["prevent","stop"]))},v(t.dashboard.is_favourite?"★":"☆"),3)]),r(o,{name:"arrow-right",class:"h-4 w-4 text-gray-600"})]),e("div",Q,[e("div",W,[e("div",X,[r(o,{name:"eye",class:"mr-1 h-4 w-4"}),$(" "+v(x(R)(t.dashboard.view_count)),1)]),e("div",Z,[r(o,{name:"bar-chart-2",class:"mr-1 h-4 w-4"}),$(" "+v(t.dashboard.charts.length),1)])]),e("div",ee," Updated "+v(t.dashboard.modified_from_now),1)])])]),_:1},8,["to"])}}},se={class:"flex items-center"},ae={class:"text-xl font-medium text-gray-700"},oe={key:0,class:"ml-auto flex items-center"},re={class:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},le={class:"col-span-1"},ne={key:0,class:"w-full text-center text-gray-600"},D={__name:"DashboardListGroup",props:{title:{type:String,required:!0},dashboards:{type:Array,required:!0},enableSearch:{type:Boolean,default:!1}},setup(t){const h=t,s=_(""),m=y(()=>s.value?h.dashboards.filter(f=>f.title.toLowerCase().includes(s.value.toLowerCase())):h.dashboards);return(f,u)=>{const o=c("Badge"),g=c("Input");return l(),d("div",null,[e("div",se,[e("div",ae,v(t.title),1),r(o,{variant:"outline",label:String(t.dashboards.length),class:"ml-2"},null,8,["label"]),t.enableSearch?(l(),d("div",oe,[r(g,{ref:"searchInput",modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),iconLeft:"search",placeholder:"Search..."},null,8,["modelValue"])])):k("",!0)]),e("div",re,[(l(!0),d(S,null,q(m.value,n=>(l(),d("div",le,[(l(),w(te,{key:n.id,dashboard:n},null,8,["dashboard"]))]))),256)),s.value&&m.value.length===0?(l(),d("div",ne," No dashboards found. ")):k("",!0)])])}}},ie={class:"sticky top-0 z-10 flex items-center justify-between bg-white px-5 py-2.5"},de={class:"space-x-2.5"},ue={class:"flex flex-1 space-y-4 overflow-hidden bg-white px-5 py-2"},ce={key:0,class:"flex flex-1 flex-col space-y-6 overflow-y-auto p-1"},he={key:1,class:"flex flex-1 flex-col items-center justify-center space-y-1"},Ve={__name:"DashboardList",setup(t){const h=M().settings,s=I();s.reload();const m=y(()=>s.list.sort((i,a)=>i.title.localeCompare(a.title))),f=y(()=>s.list.filter(i=>i.is_favourite)),u=y(()=>s.list.filter(i=>i.is_private)),o=_(!1);z().hash=="#new"&&(o.value=!0);const n=_(""),L=A();async function N(){const i=await s.create(n.value);o.value=!1,n.value="",L.push(`/dashboard/${i}`)}const j=_({title:"Dashboards"});return G(j),(i,a)=>{var V,B;const C=c("Button"),F=c("Input"),P=c("Dialog");return l(),d(S,null,[e("header",ie,[r(E,{class:"h-7",items:[{label:"Dashboards"}]}),e("div",de,[r(C,{label:"New Dashboard",variant:"solid",onClick:a[0]||(a[0]=p=>o.value=!0)},{prefix:b(()=>[r(x(K),{class:"h-4 w-4"})]),_:1})])]),e("div",ue,[(B=(V=x(s))==null?void 0:V.list)!=null&&B.length?(l(),d("div",ce,[f.value.length>0?(l(),w(D,{key:0,dashboards:f.value,title:"Favorites"},null,8,["dashboards"])):k("",!0),x(h).enable_permissions?(l(),w(D,{key:1,dashboards:u.value,title:"Private"},null,8,["dashboards"])):k("",!0),r(D,{dashboards:m.value,title:"All",enableSearch:!0},null,8,["dashboards"])])):(l(),d("div",he,[a[4]||(a[4]=e("div",{class:"text-base font-light text-gray-600"}," You haven't created any dashboards yet. ",-1)),e("div",{class:"cursor-pointer text-sm font-light text-blue-500 hover:underline",onClick:a[1]||(a[1]=p=>o.value=!0)}," Create a new dashboard ")]))]),r(P,{options:{title:"New Dashboard"},modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=p=>o.value=p)},{"body-content":b(()=>[r(F,{type:"text",label:"Title",placeholder:"Enter a suitable title...",modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=p=>n.value=p)},null,8,["modelValue"])]),actions:b(()=>[r(C,{class:"w-full",variant:"solid",onClick:N,loading:x(s).creating},{default:b(()=>a[5]||(a[5]=[$(" Create ")])),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}};export{Ve as default};
//# sourceMappingURL=DashboardList-c8f5b95a.js.map
