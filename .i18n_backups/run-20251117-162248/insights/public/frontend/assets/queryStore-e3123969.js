import{c as p,f as m}from"./index-77f7bd6f.js";import{a as f,d as n}from"./toasts-2937f9d2.js";import"./dayjs-e81f6541.js";import{V as y}from"./widgets-5dfe9af0.js";import{u as r,q as _}from"./frappe-ui-d69b39da.js";/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=p("component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]),g=m("insights:queries",()=>{const t=f({url:"insights.api.queries.get_queries",doctype:"Insights Query",cache:"queryList",fields:s.map(e=>e.value),filters:{},auto:!0,pageLength:50,orderBy:"creation desc"}),l=r(()=>{var e;return((e=t.list.data)==null?void 0:e.map(a=>(a.created_from_now=_(a.creation).fromNow(),a)))||[]}),i=r(()=>l.value.map(o));function o(e){return{label:e.title,value:e.name,description:e.data_source}}async function d(e){return n.submit(e).then(a=>(t.list.reload(),a))}async function u(e){return t.delete.submit(e).then(()=>{t.list.reload()})}function c(e){t.filters=e,t.list.reload()}return{list:l,dropdownOptions:i,loading:t.list.loading,creating:n.loading,deleting:t.delete.loading,reload:()=>t.list.reload(),create:d,delete:u,getFilterableFields:()=>s,applyFilters:e=>c(e),getDropdownOptions:()=>i.value}}),s=[{label:"Name",value:"name",fieldname:"name",fieldtype:"Data"},{label:"Title",value:"title",fieldname:"title",fieldtype:"Data"},{label:"Status",value:"status",fieldname:"status",fieldtype:"Select",options:`Pending Execution
Execution Successful
Execution Failed`},{label:"Is Assisted Query",value:"is_assisted_query",fieldname:"is_assisted_query",fieldtype:"Check"},{label:"Is Native Query",value:"is_native_query",fieldname:"is_native_query",fieldtype:"Check"},{label:"Is Script Query",value:"is_script_query",fieldname:"is_script_query",fieldtype:"Check"},{label:"Is Stored",value:"is_stored",fieldname:"is_stored",fieldtype:"Check"},{label:"Data Source",value:"data_source",fieldname:"data_source",fieldtype:"Link",options:"Insights Data Source"},{label:"Creation",value:"creation",fieldname:"creation",fieldtype:"Datetime"},{label:"Owner",value:"owner",fieldname:"owner",fieldtype:"Link",options:"User"},{label:"Owner Name",value:"owner_name",fieldname:"owner_name",fieldtype:"Data"},{label:"Owner Image",value:"owner_image",fieldname:"owner_image",fieldtype:"Data"},{label:"Chart Type",value:"chart_type",fieldname:"chart_type",fieldtype:"Select",options:y.join(`
`)}],D=g;export{k as C,D as u};
//# sourceMappingURL=queryStore-e3123969.js.map
